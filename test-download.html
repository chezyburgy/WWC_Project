<!DOCTYPE html>
<html>
<head>
    <title>Download Test</title>
    <style>
        body { 
            font-family: system-ui; 
            padding: 40px;
            background: #1a1a2e;
            color: white;
        }
        button {
            padding: 12px 24px;
            margin: 10px;
            font-size: 16px;
            cursor: pointer;
            background: #6366f1;
            color: white;
            border: none;
            border-radius: 8px;
        }
        button:hover {
            background: #4f46e5;
        }
        #log {
            margin-top: 20px;
            padding: 20px;
            background: #0f0f1e;
            border-radius: 8px;
            font-family: monospace;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <h1>Download Test</h1>
    <p>Click the buttons to test download functionality:</p>
    
    <button onclick="downloadCSV()">ðŸ“¥ Download CSV</button>
    <button onclick="downloadJSON()">ðŸ“¥ Download JSON</button>
    
    <div id="log"></div>

    <script>
        function log(msg) {
            const logDiv = document.getElementById('log');
            logDiv.innerHTML += `<div>${new Date().toISOString()}: ${msg}</div>`;
            console.log(msg);
        }

        function downloadCSV() {
            log('CSV download clicked');
            try {
                const headers = ['Order ID', 'Status', 'Created At'];
                const rows = [
                    ['order-1', 'SHIPPED', '2025-11-06'],
                    ['order-2', 'PENDING', '2025-11-06'],
                    ['order-3', 'REFUNDED', '2025-11-05']
                ];
                
                const csv = [headers, ...rows].map(row => row.join(',')).join('\n');
                log(`CSV generated: ${csv.length} bytes`);
                
                const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `test-orders-${new Date().toISOString().split('T')[0]}.csv`;
                document.body.appendChild(a);
                log('Clicking download link...');
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                log('CSV download completed!');
            } catch (err) {
                log('ERROR: ' + err.message);
                console.error(err);
            }
        }

        function downloadJSON() {
            log('JSON download clicked');
            try {
                const data = [
                    { orderId: 'order-1', status: 'SHIPPED', createdAt: '2025-11-06' },
                    { orderId: 'order-2', status: 'PENDING', createdAt: '2025-11-06' },
                    { orderId: 'order-3', status: 'REFUNDED', createdAt: '2025-11-05' }
                ];
                
                const json = JSON.stringify(data, null, 2);
                log(`JSON generated: ${json.length} bytes`);
                
                const blob = new Blob([json], { type: 'application/json;charset=utf-8;' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `test-orders-${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(a);
                log('Clicking download link...');
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                log('JSON download completed!');
            } catch (err) {
                log('ERROR: ' + err.message);
                console.error(err);
            }
        }

        log('Page loaded - ready to test downloads');
    </script>
</body>
</html>
